function showWishlistModal(t,e,i={}){if(document.querySelector(".wishlist-quick-view-modal-wrapper"))return;if(!window.WishlistUtils)return void console.error("No utility object (WishlistUtils) found.");const n=t.featuredImage.url||"https://via.placeholder.com/100",s=`/products/${t.handle}`||"#",o=t.title||"Unknown Product",a=t.images,l=Array.isArray(a)?a:a&&a.edges?a.edges.map((t=>t.node)):[{url:n,altText:"No description available"}];let r=0;if(t.rating&&"string"==typeof t.rating.value)try{const e=JSON.parse(t.rating.value);r=parseFloat(e.value)||0}catch(t){r=0}let d=0;t.reviewCount&&"string"==typeof t.reviewCount.value&&(d=parseInt(t.reviewCount.value,10)||0),t.rating=r,t.ratingCount=d;const c=t.variants.edges&&t.variants.edges.length>0&&t.variants.edges[0].node.selectedOptions?t.variants.edges[0].node.selectedOptions.map((t=>t.name)):[],u=c.map(((e,i)=>{const n=[...new Set(t.variants.edges.map((t=>(t.node.selectedOptions||[]).find((t=>t.name===e))?.value)).filter(Boolean))];return`\n  <div class="wishlist-variant-group" data-option-index="${i}">\n    <div class="wishlist-variant-label">${e}:</div>\n    <div class="wishlist-variant-buttons">\n      ${n.map(((n,s)=>`\n            <button type="button" class="wishlist-variant-btn${!(t.variants.edges||[]).some((t=>(t.node.selectedOptions||[]).some((t=>t.name===e&&t.value===n))&&!1!==t.node.availableForSale))?" wishlist-variant-btn-soldout":""}" data-option-index="${i}" data-value="${n}">${n}</button>\n          `)).join("")}\n    </div>\n  </div>\n`})).join("");document.body.style.overflow="hidden";const w=document.createElement("div"),h=document.createElement("div");h.className="wishlist-quick-view-modal-wrapper",w.className="wishlist-quick-view-modal-box";const v="buy-now"===e?i.buyNowText:"add-to-cart"===e?i.atcTextRVP:i.atcTextRO;w.innerHTML=`\n    <div class="wishlist-quick-view-modal">\n        <button class="wishlist-close">&times;</button>\n        <div class="wishlist-modal-content">\n            <a class="wishlist-back-to-shop" onclick="document.querySelector('.wishlist-quick-view-modal-wrapper').remove(); document.body.style.overflow = ''">Back to shop</a>\n            <div class="wishlist-quick-view-left-content">\n                <div class="wishlist-thumbnail-carousel-wrapper">\n                  <button class="wishlist-thumb-arrow wishlist-thumb-arrow-up">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>\n                  </button>\n                  <div class="wishlist-quick-view-thumbnails" tabindex="0">\n                    ${l.map(((t,e)=>`\n                        <img \n                        src="${t.url}" \n                        alt="Thumbnail ${e+1}" \n                        class="wishlist-thumbnail-image" data-thumb-index="${e}" \n                        onclick="document.getElementById('wishlist-main-product-image').src='${t.url}'"\n                        />\n                    `)).join("")}\n                  </div>\n                  <button class="wishlist-thumb-arrow wishlist-thumb-arrow-down">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>\n                  </button>\n                </div>\n                <div class="wishlist-main-image-carousel-wrapper">\n                  <button class="wishlist-main-arrow wishlist-main-arrow-left">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>\n                  </button>\n                  <div class="wishlist-quick-view-main-image-list" tabindex="0">\n                    ${l.map(((t,e)=>`\n                      <img src="${t.url}" alt="${o}" class="wishlist-main-image-item" data-main-index="${e}" draggable="false" />\n                    `)).join("")}\n                  </div>\n                  <button class="wishlist-main-arrow wishlist-main-arrow-right">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>\n                  </button>\n                </div>\n            </div>\n            <div class="wishlist-quick-view-right-content">\n                <a class="wishlist-quick-view-product-title" href="${s}">\n                    ${o}\n                </a>\n                ${t.rating&&t.ratingCount?`\n                <div class="wishlist-quick-view-reviews">\n                    <span class="wishlist-qv-reviews-badge__stars" data-score="${t.rating}">\n                        ${renderStars(t.rating)}\n                    </span>\n                    <span class="wishlist-qv-reviews-badge__text">\n                        <strong>${t.ratingCount} Review${1==t.ratingCount?"":"s"}</strong>\n                    </span>\n                </div>\n                `:""}\n                 <a href="${s}" target="_blank" class="wishlist-view-details">view full details</a>\n\n                <div class="wishlist-price-wrapper" id="wishlist-quick-view-price-wrapper">\n                  <div class="wishlist-compare-at-row">\n                    <span id="wishlist-quick-view-compare-price" class="wishlist-compare-at-price"></span>\n                  </div>\n                  <div class="wishlist-price-row">\n                    <span id="wishlist-quick-view-price"></span>\n                    <span class="wishlist-vertical-separator">|</span>\n                    <span id="wishlist-quick-view-discount-badge" class="wishlist-discount-inline" style="display:none"></span>\n                  </div>\n                </div>\n                <form id="wishlist-quick-view-form">\n                    <div id="wishlist-quick-view-soldout-message" style="display:none; color:#000; font-weight:bold; margin-bottom:8px;">Sold out</div>\n                    <div class="wishlist-variants-dropdown-wrapper">\n                    ${u}\n                    </div>\n                    <div class="wishlist-add-to-cart-container">\n                        <div class="wishlist-quantity-selector">\n                            <button type="button" id="wishlist-decrement-qty">-</button>\n                            <input type="number" id="wishlist-quick-view-quantity" name="quantity" value="1" min="1" autocomplete="off" />\n                            <button type="button" id="wishlist-increment-qty">+</button>\n                        </div>\n                        <button type="submit" class="wishlist-add-to-cart-button">\n                          <span class="wishlist-add-to-cart-text">${v}</span>\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n  `,h.appendChild(w),document.body.appendChild(h);const p=w.querySelector(".wishlist-thumb-arrow-up"),m=w.querySelector(".wishlist-thumb-arrow-down"),y=w.querySelector(".wishlist-quick-view-thumbnails"),g=Array.from(y?y.querySelectorAll(".wishlist-thumbnail-image"):[]);p&&m&&y&&(g.length<=5?(p.style.display="none",m.style.display="none",y.style.overflowY="hidden",y.style.maxHeight="none"):(p.style.display="",m.style.display="",y.style.overflowY="auto",y.style.maxHeight="400px")),p.addEventListener("click",(()=>{y.scrollBy({top:-thumbImageHeight,behavior:"smooth"})})),m.addEventListener("click",(()=>{y.scrollBy({top:thumbImageHeight,behavior:"smooth"})}));const b=w.querySelector(".wishlist-quick-view-main-image-list"),f=Array.from(b.querySelectorAll(".wishlist-main-image-item")),q=w.querySelector(".wishlist-main-arrow-left"),k=w.querySelector(".wishlist-main-arrow-right");let x,S=0;function C(t){S=t;f[S].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}q.addEventListener("click",(()=>{S>0&&C(S-1)})),k.addEventListener("click",(()=>{S<f.length-1&&C(S+1)})),b.addEventListener("scroll",(()=>{clearTimeout(x),x=setTimeout((()=>{const t=b.getBoundingClientRect();let e=1/0,i=0;f.forEach(((n,s)=>{const o=n.getBoundingClientRect(),a=Math.abs(o.left+o.width/2-(t.left+t.width/2));a<e&&(e=a,i=s)})),C(i)}),100)})),g.forEach(((t,e)=>{t.addEventListener("click",(()=>C(e)))})),C(0);const E=w.querySelector("#wishlist-quick-view-quantity");w.querySelector("#wishlist-decrement-qty").addEventListener("click",(function(){let t=parseInt(E.value,10)||1;t>1&&(E.value=t-1)})),w.querySelector("#wishlist-increment-qty").addEventListener("click",(function(){let t=parseInt(E.value,10)||1;E.value=t+1})),w.querySelector("#wishlist-quick-view-form").addEventListener("submit",(function(i){i.preventDefault();const n=(t.variants.edges||[]).find((t=>!!t.node.selectedOptions&&L.every((e=>t.node.selectedOptions.some((t=>t.name===e.name&&t.value===e.value))))))||t.variants.edges[0],s=n.node.id?n.node.id.split("/").pop():null,o=parseInt(E.value,10)||1,a=w.querySelector(".wishlist-add-to-cart-button");if(!s||!a)return;const l=a.querySelector(".wishlist-add-to-cart-text")||a,r=l.textContent;a.disabled=!0,l.classList&&l.classList.contains("wishlist-add-to-cart-text"),l.textContent="reorder"===e||"buy-now"===e?"Processing...":"Adding...",fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,quantity:o})}).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((i=>{if(w.remove(),h.remove(),document.body.style.overflow="","reorder"===e||"buy-now"===e)window.location.href="/checkout";else{const t=document.getElementById("minicart__button--header--default"),e=document.getElementById("minicart__button--header--default-mobile");t&&(t.checked=!0),e&&(e.checked=!0),setTimeout((()=>{l.classList&&l.classList.contains("wishlist-add-to-cart-text"),l.textContent=r,a.disabled=!1}),2e3)}const s=w.querySelector(".wishlist-quick-view-product-title");if(s&&n){let e=t.title;const i=t.variants.edges[0]?.node?.title,o=formatVariantTitle(n.node.title);i&&"Default Title"!==i&&e.endsWith(" - "+i)&&(e=e.slice(0,-(" - "+i).length)),s.textContent=o&&"Default Title"!==o?e+" - "+o:e}})).catch((t=>{l.textContent="Error",setTimeout((()=>{l.classList&&l.classList.contains("wishlist-add-to-cart-text"),l.textContent=r,a.disabled=!1}),2e3)}))})),w.querySelector(".wishlist-close").addEventListener("click",(()=>{w.remove(),h.remove(),document.body.style.overflow=""})),h.addEventListener("click",(t=>{t.target===h&&(w.remove(),h.remove(),document.body.style.overflow="")}));const T=w.querySelectorAll(".wishlist-variant-group"),$=(t.variants.edges||[]).find((t=>!1!==t.node.availableForSale))||t.variants.edges[0];let L=c.map(((t,e)=>{const i=($.node.selectedOptions||[]).find((e=>e.name===t));return{name:t,value:i?i.value:""}}));function O(){T.forEach(((t,e)=>{t.querySelectorAll(".wishlist-variant-btn").forEach((t=>{L[e].value===t.textContent?t.classList.add("selected"):t.classList.remove("selected")}))}))}function A(){const e=w.querySelector(".wishlist-add-to-cart-button"),i=L.some((t=>!t.value)),n=e.querySelector(".wishlist-add-to-cart-text");if(i){e.disabled=!0,n&&(n.textContent="MAKE A SELECTION"),e.style.opacity="0.7",e.style.pointerEvents="none";const i=w.querySelector("#wishlist-quick-view-soldout-message");i&&(i.style.display="none");const s=w.querySelector(".wishlist-quick-view-product-title");if(s){const e=L.filter((t=>t.value)).map((t=>t.value));e.length>0?s.textContent=t.title+" - "+e.join(" - "):s.textContent=t.title}return}const s=(t.variants.edges||[]).find((t=>!!t.node.selectedOptions&&L.every((e=>t.node.selectedOptions.some((t=>t.name===e.name&&t.value===e.value))))))||t.variants.edges[0];let o="",a="";if(s.node.presentmentPrices&&s.node.presentmentPrices.edges&&s.node.presentmentPrices.edges.length>0){const t=s.node.presentmentPrices.edges[0].node;o=t.price.amount,a=t.compareAtPrice?t.compareAtPrice.amount:""}const l=w.querySelector("#wishlist-quick-view-soldout-message");!1===s.node.availableForSale?l.style.display="":l.style.display="none";const r=w.querySelector("#wishlist-quick-view-price"),d=w.querySelector("#wishlist-quick-view-compare-price"),c=w.querySelector("#wishlist-quick-view-discount-badge"),u=w.querySelector(".wishlist-vertical-separator");if(r.textContent=window.CurrencyUtils.formatMoneyCurrency(String(o),window.money_format),a&&a!==o){d.textContent=window.CurrencyUtils.formatMoneyCurrency(String(a),window.money_format),d.style.display="",u&&(u.style.display="");const t=function(t,e){return!e||e<=t?null:Math.round((e-t)/e*100)}(parseFloat(o),parseFloat(a));t&&t>0?(c.textContent=`${t}% OFF`,c.className="wishlist-discount-inline",c.style.display=""):c.style.display="none"}else d.textContent="",d.style.display="none",c.style.display="none",u&&(u.style.display="none");!1===s.node.availableForSale?(e.disabled=!0,n&&(n.textContent="Sold Out"),e.style.opacity="0.5",e.style.pointerEvents="none"):(e.disabled=!1,n&&(n.textContent=v),e.style.opacity="",e.style.pointerEvents="");const h=w.querySelector(".wishlist-quick-view-product-title");if(h&&s){let e=t.title;const i=t.variants.edges[0]?.node?.title,n=formatVariantTitle(s.node.title);i&&"Default Title"!==i&&e.endsWith(" - "+i)&&(e=e.slice(0,-(" - "+i).length)),h.textContent=n&&"Default Title"!==n?e+" - "+n:e}}T.forEach(((t,e)=>{t.querySelectorAll(".wishlist-variant-btn").forEach((t=>{t.addEventListener("click",(()=>{L[e].value===t.textContent?L[e].value="":L[e].value=t.textContent,O(),A()}))}))})),O(),A()}function formatVariantTitle(t){return t&&t.includes(" / ")?t.replace(/ \/ /g," - "):t}function renderStars(t=0){let e="";const i=Math.round(2*t)/2;for(let t=1;t<=5;t++)e+=t<=i?'<span class="wishlist-qv-star wishlist-qv-star--on">★</span>':t-.5===i?'<span class="wishlist-qv-star wishlist-qv-star--half"><span class="wishlist-qv-star__half--on">★</span><span class="wishlist-qv-star__half--off">★</span></span>':'<span class="wishlist-qv-star wishlist-qv-star--off">★</span>';return e}document.body.addEventListener("click",(function(t){if(t.target.closest(".quick-view-btn")){const e=t.target.closest(".quick-view-btn"),i=e.getAttribute("data-product"),n=e.getAttribute("data-title"),s=e.getAttribute("data-action")||"add-to-cart",o="true"===e.getAttribute("data-has-variants");if(!i)return void console.error("No product data found on button");if(!o){try{const t=JSON.parse(i),n=t.variants?.edges?.[0]?.node?.id?.split("/").pop();if(!n)return;const o=e.querySelector(".wishlist-atc-button-text")||e;o.dataset.originalText||(o.dataset.originalText=o.textContent);const a=o.dataset.originalText;o.textContent="reorder"===s||"buy-now"===s?"Processing...":"Adding...",e.disabled=!0,"reorder"===s||"buy-now"===s?fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,quantity:1})}).then((()=>{window.location.href="/checkout"})):fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,quantity:1})}).then((()=>{const t=document.getElementById("minicart__button--header--default"),i=document.getElementById("minicart__button--header--default-mobile");t&&(t.checked=!0),i&&(i.checked=!0),setTimeout((()=>{o.textContent=a,e.disabled=!1}),2e3)}))}catch(t){console.error("Error parsing product data:",t)}return}let a=e.querySelector(".wishlist-atc-button-text")?.textContent.trim()||"",l=e.querySelector(".wishlist-buy-now-button-text")?.textContent.trim()||"";try{const t=JSON.parse(i),e=decodeURIComponent(n);showWishlistModal({...t,title:e},s,{atcTextRVP:a,buyNowText:l})}catch(t){console.error("Error parsing product data:",t)}}}));